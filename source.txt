CREATE TABLE Customer
(
  customer_id INT NOT NULL,
  customer_f_name VARCHAR(20) NOT NULL,
  customer_s_name VARCHAR(30) NOT NULL,
  customer_dob DATE NOT NULL,
  customer_mobile CHAR(13) NOT NULL,
  customer_address VARCHAR(40) NOT NULL,
  customer_postcode VARCHAR(8) NOT NULL,
  PRIMARY KEY (customer_id),
  UNIQUE (customer_mobile)
);

CREATE TABLE Card
(
  card_id INT NOT NULL,
  card_number CHAR(16) NOT NULL,
  card_expiry CHAR(5) NOT NULL,
  card_cvv CHAR(3) NOT NULL,
  customer_id INT NOT NULL,
  PRIMARY KEY (card_id),
  FOREIGN KEY (customer_id) REFERENCES Customer(customer_id),
  UNIQUE (card_number)
);

CREATE TABLE Film
(
  film_id INT NOT NULL,
  film_name VARCHAR(30) NOT NULL,
  film_description VARCHAR(500) NOT NULL,
  film_runtime INT NOT NULL,
  film_director VARCHAR(50) NOT NULL,
  film_age_rating VARCHAR(3) NOT NULL,
  film_poster VARCHAR(50) NOT NULL,
  PRIMARY KEY (film_id),
  UNIQUE (film_name)
);

CREATE TABLE Screen
(
  screen_id INT NOT NULL,
  screen_capacity INT,
  PRIMARY KEY (screen_id)
);

CREATE TABLE Screening
(
  screening_id INT NOT NULL,
  screening_time CHAR(5) NOT NULL,
  screening_date DATE NOT NULL,
  film_id INT NOT NULL,
  screen_id INT NOT NULL,
  PRIMARY KEY (screening_id),
  FOREIGN KEY (film_id) REFERENCES Film(film_id),
  FOREIGN KEY (screen_id) REFERENCES Screen(screen_id),
  UNIQUE (screen_id, screening_time, screening_date)
);

CREATE TABLE Login
(
  login_email VARCHAR(30) NOT NULL,
  login_password VARCHAR(30) NOT NULL,
  login_hint VARCHAR(30),
  customer_id INT NOT NULL,
  PRIMARY KEY (customer_id),
  FOREIGN KEY (customer_id) REFERENCES Customer(customer_id),
  UNIQUE (login_email)
);

CREATE TABLE Seat
(
  seat_id INT NOT NULL,
  PRIMARY KEY (seat_id)
);

CREATE TABLE Staff
(
  staff_id INT NOT NULL,
  staff_f_name VARCHAR(20) NOT NULL,
  staff_s_name VARCHAR(30) NOT NULL,
  staff_dob DATE NOT NULL,
  staff_mobile CHAR(13) NOT NULL,
  staff_address VARCHAR(40) NOT NULL,
  staff_postcode VARCHAR(8) NOT NULL,
  staff_ni CHAR(9) NOT NULL,
  PRIMARY KEY (staff_id),
  UNIQUE (staff_mobile),
  UNIQUE (staff_ni)
);

CREATE TABLE Ticket
(
  ticket_id INT NOT NULL,
  screening_id INT NOT NULL,
  customer_id INT NOT NULL,
  seat_id INT NOT NULL,
  PRIMARY KEY (ticket_id),
  FOREIGN KEY (screening_id) REFERENCES Screening(screening_id),
  FOREIGN KEY (customer_id) REFERENCES Customer(customer_id),
  FOREIGN KEY (seat_id) REFERENCES Seat(seat_id),
  UNIQUE (screening_id, seat_id)
);
